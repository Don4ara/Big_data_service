# Data Vitrine Mock API

–≠—Ç–æ backend-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –±–∞–∑–µ **NestJS**, –∫–æ—Ç–æ—Ä–æ–µ —Å–ª—É–∂–∏—Ç –ø–µ—Å–æ—á–Ω–∏—Ü–µ–π/–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º —Ñ–µ–π–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∑–∞–∫–∞–∑–æ–≤ –∏–∑ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤). –û–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JSON-–æ–±—ä–µ–∫—Ç—ã —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º–∏, –Ω–æ –ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∏—Ç—Ä–∏–Ω –¥–∞–Ω–Ω—ã—Ö, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

## –ö–∞–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —É —Å–µ–±—è

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è v18 –∏–ª–∏ v20+)
- npm –∏–ª–∏ yarn

### –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞:
   ```bash
   git clone <url-–≤–∞—à–µ–≥–æ-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
   cd Big_data_service
   ```
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   npm install
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (watch mode):
   ```bash
   npm run start:dev
   ```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:3006`.

---

## üì° –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (API)

–í—Å–µ –º–µ—Ç–æ–¥—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ø–æ –ø—É—Ç–∏ `/data-vitrine`.

### 1. `GET /data-vitrine/generate`
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ö —Å–ø–∏—Å–∫–æ–º (–≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON) –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (–≤—Ä–µ–º–µ–Ω–Ω–æ).
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `?count=10` (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10, –º–∞–∫—Å–∏–º—É–º 5000)
- **–ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞:** `http://localhost:3000/data-vitrine/generate?count=5`

### 2. `GET /data-vitrine/stream`
–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö (Server-Sent Events - SSE).
–ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç 1 –¥–æ 5 –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –∫–ª–∏–µ–Ω—Ç—É. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª-—Ç–∞–π–º –¥–∞—à–±–æ—Ä–¥–æ–≤.
- **–ü—Ä–∏–º–µ—Ä:** –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ `EventSource` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º–∏ SSE.

### 3. `GET /data-vitrine/orders`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ **–≤—Å–µ** –∑–∞–∫–∞–∑—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞ –≤—Ä–µ–º—è —Ç–µ–∫—É—â–µ–π —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ (—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏).

### 4. `POST /data-vitrine/orders`
–ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –∑–∞–∫–∞–∑–∞ –≤ –æ–±—â–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ –ø–∞–º—è—Ç–∏.
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–∫–∞–∑–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.
- –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è, —Ç–∞–∫–∏–µ –∫–∞–∫ `orderId`, `createdAt`, `updatedAt`, –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –≤—ã –∏—Ö –Ω–µ –ø–µ—Ä–µ–¥–∞–¥–∏—Ç–µ.

---

## üèó –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON-—Ñ–∞–π–ª–∞ –∑–∞–∫–∞–∑–∞ –∏ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö

–ö–∞–∂–¥—ã–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–∫–∞–∑ –∏–º–µ–µ—Ç –≥–ª—É–±–æ–∫—É—é –∏ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π –∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤.

### –ü—Ä–∏–º–µ—Ä –∫–æ—Ä–Ω–µ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```json
{
  "orderId": "REST-2025-12345",
  "orderDate": "2024-02-15T12:00:00.000Z",
  "currency": "RUB",
  "customer": { ... },
  "restaurant": { ... },
  "orderContent": { ... },
  "courier": { ... },
  "financialSummary": { ... },
  "status": "–î–æ—Å—Ç–∞–≤–ª–µ–Ω",
  "review": { ... },
  "createdAt": "2024-02-15T11:00:00.000Z",
  "updatedAt": "2024-02-15T12:05:00.000Z"
}
```

### –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ (–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

–°–∏—Å—Ç–µ–º–∞ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö (–≥—Ä—è–∑–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ), —á—Ç–æ–±—ã –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏:

**1. –î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ (`orderDate`)**
–ú–æ–∂–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤ **—Ç—Ä–µ—Ö** —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö:
- ISO 8601 —Å—Ç—Ä–æ–∫–∞: `"2024-02-15T13:45:30.000Z"`
- Unix Timestamp (—á–∏—Å–ª–æ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö): `1708004730`
- –õ–æ–∫–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ —Å—Ç—Ä–æ–∫–æ–π (–†–§): `"15.02.2024"`

**2. –¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞ (`customer.phone`)**
- –ü–æ–ª–Ω—ã–π –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π (—Å –¥–µ—Ñ–∏—Å–∞–º–∏): `"+7-999-123-45-67"`
- –ë–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—á–µ—Ä–µ–∑ 8): `"89991234567"`
- –ë–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—á–µ—Ä–µ–∑ +7): `"+79991234567"`

**3. –ù–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –∫—É—Ä—å–µ—Ä–∞ (`courier.phone`)**
- –°—Ç—Ä–æ–≥–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `"+79991234567"`

**4. –ß–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞ (`deliveryTimeZone` / `timeZone`)**
- –°–º–µ—â–µ–Ω–∏–µ: `"+03:00"`, `"+05:00"`, `"+07:00"`
- –ù–∞–∑–≤–∞–Ω–∏–µ –∑–æ–Ω—ã: `"Europe/Moscow"`, `"Asia/Yekaterinburg"`

### –û–ø–∏—Å–∞–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤

* **customer (–ü–æ–∫—É–ø–∞—Ç–µ–ª—å)**
  * `customerId` ‚Äî ID –ø–æ–∫—É–ø–∞—Ç–µ–ª—è.
  * `fullName` ‚Äî –ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è.
  * `phone` ‚Äî –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.
  * `email` ‚Äî Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
  * `deliveryAddress` ‚Äî –ü–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å: –≥–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –Ω–æ–º–µ—Ä –¥–æ–º–∞ —Å –¥—Ä–æ–±—å—é (`15/2`), –∫–≤–∞—Ä—Ç–∏—Ä–∞, –ø–æ–¥—ä–µ–∑–¥, —ç—Ç–∞–∂, –¥–æ–º–æ—Ñ–æ–Ω (—Å —Å–∏–º–≤–æ–ª–æ–º `#`) –∏ –ø–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å.

* **restaurant (–†–µ—Å—Ç–æ—Ä–∞–Ω)**
  * `restaurantId`, `brandName` (–ë—Ä–µ–Ω–¥), `legalEntity` (–Æ—Ä. –ª–∏—Ü–æ).
  * `address` ‚Äî –ü–æ–ª–Ω—ã–π —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞.
  * `taxInfo` ‚Äî –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞–ª–æ–≥–∞—Ö: –ò–ù–ù, –ö–ü–ü, `vatPercent` (20).
  * `workingHours` ‚Äî –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã (start: `"10:00:00"`, end: `"20:00:00"`, timeZone).

* **orderContent (–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞)**
  * `items`: –ú–∞—Å—Å–∏–≤ –ø–æ–∑–∏—Ü–∏–π (–±–ª—é–¥).
    * `productId`, `name` (–ù–∞–∑–≤–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ, 20% —à–∞–Ω—Å —á—Ç–æ —ç—Ç–æ –¥–µ—Å–µ—Ä—Ç), `quantity` (–æ—Ç 1 –¥–æ 3), `pricePerUnit`, `category` (–ö–∞—Ç–µ–≥–æ—Ä–∏—è –∏–∑ —Å–ª–æ–≤–∞—Ä—è).
    * `specialInstructions`: –ü–æ–∂–µ–ª–∞–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä *"–ú–µ–Ω—å—à–µ –ª—å–¥–∞"*, *"–ë–µ–∑ –ª—É–∫–∞, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞"* (—Å –≤—ã—Å–æ–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é –º–æ–∂–µ—Ç –±—ã—Ç—å `null`).
  * `options`: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∏–ø–∞ `numberOfCutlery` (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–±–æ—Ä–æ–≤), `requiresContactlessDelivery` (–±–µ—Å–∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞), `isEcoFriendlyPackaging` (—ç–∫–æ-—É–ø–∞–∫–æ–≤–∫–∞).

* **courier (–ö—É—Ä—å–µ—Ä)**
  * `courierId`, `name`.
  * `transportType` ‚Äî –°–ø–æ—Å–æ–± –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è: `"bicycle"`, `"car"`, `"walking"`, `"scooter"`.
  * `currentLocation` ‚Äî –î–æ–ª–≥–æ—Ç–∞ (`lon`) –∏ —à–∏—Ä–æ—Ç–∞ (`lat`).
  * `estimatedArrival` ‚Äî –í—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è —Å—Ç—Ä–æ–∫–æ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä `"14:30"`.

* **financialSummary (–§–∏–Ω–∞–Ω—Å—ã)**
  * `paymentMethod`: –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã (`"CARD_ONLINE"`, `"CASH"`, `"APPLE_PAY"`, `"GOOGLE_PAY"`, `"SBP"`).
  * `subtotal`, `taxAmount`, `deliveryFee` (–º–æ–∂–µ—Ç –±—ã—Ç—å 0), `serviceFee` (–º–æ–∂–µ—Ç –±—ã—Ç—å 0).
  * `discountAmount`: –†–∞–∑–ª–∏—á–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–∫–∏–¥–æ–∫ –∏–ª–∏ 0. –ü–ª—é—Å –ø–ª–∞–≤–∞—é—â–∞—è —Å–∫–∏–¥–∫–∞ 10%.
  * `grandTotal`: –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞.

* **status & review (–°—Ç–∞—Ç—É—Å –∏ –û—Ç–∑—ã–≤—ã)**
  * –°—Ç–∞—Ç—É—Å –º–æ–∂–µ—Ç –±—ã—Ç—å: `"–ù–æ–≤—ã–π"`, `"–ì–æ—Ç–æ–≤–∏—Ç—Å—è"`, `"–ü–µ—Ä–µ–¥–∞–Ω –∫—É—Ä—å–µ—Ä—É"`, `"–î–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è"`, `"–î–æ—Å—Ç–∞–≤–ª–µ–Ω"`, `"–û—Ç–º–µ–Ω–µ–Ω"`.
  * `review`: –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ = `"–î–æ—Å—Ç–∞–≤–ª–µ–Ω"`, —Ç–æ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 70% —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç–∑—ã–≤ (—Ä–µ–π—Ç–∏–Ω–≥ 4-5) –∏ —Å 30% –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π (—Ä–µ–π—Ç–∏–Ω–≥ 1-3) —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –∏–∑ —Å–ª–æ–≤–∞—Ä–µ–π. –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –Ω–µ "–î–æ—Å—Ç–∞–≤–ª–µ–Ω", –ø–æ–ª–µ —Ä–∞–≤–Ω–æ `null`.
